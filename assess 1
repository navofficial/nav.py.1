import requests
from datetime import datetime
import time
import json

# OpenWeatherMap API key - Replace with your own API key
API_KEY = "YOUR_API_KEY"

# Location coordinates (latitude and longitude)
LATITUDE = "YOUR_LATITUDE"
LONGITUDE = "YOUR_LONGITUDE"

# Weather data URL
WEATHER_URL = f"https://api.openweathermap.org/data/2.5/weather?lat={LATITUDE}&lon={LONGITUDE}&appid={API_KEY}&units=metric"

def get_weather_data():
  """Fetches weather data from OpenWeatherMap API."""
  response = requests.get(WEATHER_URL)
  if response.status_code == 200:
    return response.json()
  else:
    print("Error fetching weather data.")
    return None

def format_weather_data(data):
  """Formats weather data for display."""
  if data:
    temp = data["main"]["temp"]
    feels_like = data["main"]["feels_like"]
    description = data["weather"][0]["description"]
    humidity = data["main"]["humidity"]
    wind_speed = data["wind"]["speed"]
    
    timestamp = datetime.fromtimestamp(data["dt"])
    formatted_timestamp = timestamp.strftime("%Y-%m-%d %H:%M:%S")
    
    weather_info = f"""
      Current Weather:
      Timestamp: {formatted_timestamp}
      Temperature: {temp:.1f}°C
      Feels Like: {feels_like:.1f}°C
      Description: {description}
      Humidity: {humidity}%
      Wind Speed: {wind_speed} m/s
    """
    return weather_info
  else:
    return "No weather data available."

# Main loop for real-time monitoring
while True:
  weather_data = get_weather_data()
  formatted_weather = format_weather_data(weather_data)
  print(formatted_weather)

  # Update weather data every 60 seconds
  time.sleep(60)
